{"version":3,"file":"9831ef3a25ac1fc688d4.js","sources":["webpack:///./pages/index.vue"],"sourcesContent":["//\n//\n//\n//\n//\n//\n\nconst loadData = function({api, cacheVersion, errorCallback, version, path}) {\n  return api.get(`cdn/stories/${path}`, {\n    version: version,\n    cv: cacheVersion\n  }).then((res) => {\n    return res.data\n  }).catch((res) => {\n    if (!res.response) {\n      console.error(res)\n      errorCallback({ statusCode: 404, message: 'Failed to receive content form api' })\n    } else {\n      console.error(res.response.data)\n      errorCallback({ statusCode: res.response.status, message: res.response.data })\n    }\n  })\n}\n\nexport default {\n  data () {\n    return { story: { content: {} } }\n  },\n  mounted () {\n    this.$storybridge.on(['input', 'published', 'change'], (event) => {\n      if (event.action == 'input') {\n        if (event.story.id === this.story.id) {\n          this.story.content = event.story.content\n        }\n      } else if (!event.slugChanged) {\n        window.location.reload()\n      }\n    })\n  },\n  asyncData (context) {\n    // Check if we are in the editing mode\n    let editMode = false\n\n    if (context.query._storyblok || context.isDev || (typeof window !== 'undefined' && window.localStorage.getItem('_storyblok_draft_mode'))) {\n      if (typeof window !== 'undefined') {\n        window.localStorage.setItem('_storyblok_draft_mode', '1')\n        if (window.location == window.parent.location) {\n          window.localStorage.removeItem('_storyblok_draft_mode')\n        }\n      }\n\n      editMode = true\n    }\n\n    let version = editMode ? 'draft' : 'published'\n    let path = context.route.path == '/' ? 'home' : context.route.path\n\n    // Load the JSON from the API\n    return loadData({\n      version: version,\n      api: context.app.$storyapi,\n      cacheVersion: context.store.state.cacheVersion,\n      errorCallback: context.error,\n      path: path\n    })\n  }\n}\n"],"mappings":"AAwBA","sourceRoot":""}